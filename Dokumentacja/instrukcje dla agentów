# INSTRUKCJE DLA AGENTÃ“W - BET ASSISTANT 2.0

**Data aktualizacji:** 30 grudnia 2025

---

## 0. WPROWADZENIE W PROJEKT

### 0.1 Czym jest Bet Assistant 2.0?

**Bet Assistant 2.0** to zaawansowany system do analizy meczÃ³w piÅ‚karskich i wyszukiwania okazji do typowania. Aplikacja pomaga uÅ¼ytkownikom:

- ImportowaÄ‡ dane meczÃ³w z API Football
- AnalizowaÄ‡ statystyki zespoÅ‚Ã³w i rozgrywek
- WyszukiwaÄ‡ typy wedÅ‚ug 15+ algorytmÃ³w analitycznych
- ZarzÄ…dzaÄ‡ kuponami bukmacherskimi
- IntegrowaÄ‡ siÄ™ z Google Sheets
- GenerowaÄ‡ raporty i statystyki

### 0.2 Kontekst migracji

Obecnie przeprowadzamy **peÅ‚nÄ… migracjÄ™** aplikacji:

- **Z:** Vanilla JavaScript (stary projekt w folderze `./stary/`)
- **Na:** React + TypeScript + Vite
- **Backend:** Pozostaje BEZ ZMIAN (Express + Prisma + PostgreSQL na localhost:3000)

### 0.3 Stan obecny (30 grudnia 2025)

âœ… **Co juÅ¼ mamy:**

- Setup projektu (Vite + React + TypeScript)
- Routing (React Router) z 5 stronami
- State management (Zustand)
- API layer (TanStack Query)
- Konfiguracja proxy do backendu
- Struktura folderÃ³w
- Git + GitHub integration
- Podstawowy Layout z nawigacjÄ…

â³ **Co przed nami:**

- Migracja logiki biznesowej ze starego projektu
- Implementacja 15+ algorytmÃ³w wyszukiwania typÃ³w
- Komponenty UI (Modal, Table, Form, etc.)
- Integracja z backendem
- Wszystkie funkcjonalnoÅ›ci z 5 zakÅ‚adek

### 0.4 GÅ‚Ã³wne funkcjonalnoÅ›ci aplikacji

#### ğŸ“¥ Import (zakÅ‚adka 1)

- ZarzÄ…dzanie ligami (wÅ‚Ä…czanie/wyÅ‚Ä…czanie)
- Import meczÃ³w z API Football wedÅ‚ug zakresu dat
- WyÅ›wietlanie statystyk (liczba lig, meczÃ³w, krajÃ³w)
- Kolejka zadaÅ„ importu
- Zadania w tle (background jobs)

#### ğŸ—„ï¸ Baza Danych (zakÅ‚adka 2)

- PrzeglÄ…danie bazy meczÃ³w
- Filtrowanie po: kraju, lidze, druÅ¼ynie
- Wyszukiwanie z autocomplete
- SzczegÃ³Å‚y meczu w modalu
- Statystyki zespoÅ‚Ã³w
- Limity wynikÃ³w (5, 10, 20, wszystkie)

#### ğŸ” Wyszukiwarka TypÃ³w (zakÅ‚adka 3) - **NAJWAÅ»NIEJSZA**

- 15+ algorytmÃ³w wyszukiwania (bramki, roÅ¼ne, spalone, wyniki, itp.)
- Zakres dat (dziÅ›, jutro, pojutrze, custom)
- TOP wynikÃ³w (5, 10, 15, 20)
- Limit meczÃ³w na wyszukiwanie
- Kolejka wyszukiwaÅ„ (SearchQueue)
- Modal z wynikami (uniwersalny dla wszystkich typÃ³w)
- Akcje: dodaj do Bet Builder, obserwuj mecz
- Auto-dodawanie typÃ³w

#### ğŸ“Š Strefa Typera (zakÅ‚adka 4)

- Backfill danych (uzupeÅ‚nianie brakujÄ…cych)
- Akcje: accept, verify, create coupon
- Obserwowane mecze (watched matches)
- UzupeÅ‚nianie szans zespoÅ‚Ã³w
- Integracja z Google Sheets

#### ğŸ“ˆ Analityka (zakÅ‚adka 5)

- Podsumowanie (total bets, wins, losses)
- Filtry statystyk
- Wykresy (success rate, ROI)
- Tabela statystyk
- Export danych

### 0.5 Architektura techniczna

#### Frontend (TO ROBIMY)

```
React 18.3.1          - UI components
TypeScript 5.9.3      - Type safety
Vite 5.4.21          - Build tool & dev server
React Router 6.30.2   - Client-side routing
Zustand 5.0.9        - Global state management
TanStack Query 5.90  - Server state & caching
CSS Modules          - Component styling
```

#### Backend (NIE ZMIENIAMY)

```
Express              - HTTP server
Prisma               - ORM
PostgreSQL           - Database
localhost:3000       - API endpoint
```

#### Komunikacja

```
Frontend Vite Proxy: /api/* â†’ http://localhost:3000
```

### 0.6 Kluczowe endpointy API

**Ligi:**

- `GET /api/leagues` - lista wszystkich lig
- `POST /api/leagues/enable` - wÅ‚Ä…cz ligÄ™
- `POST /api/leagues/disable` - wyÅ‚Ä…cz ligÄ™
- `GET /api/leagues/enabled` - wÅ‚Ä…czone ligi

**Mecze:**

- `GET /api/matches` - lista meczÃ³w (z filtrami)
- `GET /api/matches/:id` - szczegÃ³Å‚y meczu
- `POST /api/matches/import` - import meczÃ³w

**Statystyki:**

- `GET /api/stats/team/:name` - statystyki druÅ¼yny
- `GET /api/stats/league/:id` - statystyki ligi

**Bet Finder:**

- `POST /api/bet-finder/search` - wyszukiwanie typÃ³w

**Background Jobs:**

- `GET /api/background-jobs` - lista zadaÅ„
- `POST /api/background-jobs` - nowe zadanie
- `PUT /api/background-jobs/:id` - update zadania

**Analityka:**

- `GET /api/analytics/summary` - podsumowanie
- `GET /api/analytics/bets` - lista zakÅ‚adÃ³w

### 0.7 Referencja - stary projekt

CaÅ‚y stary kod znajduje siÄ™ w folderze `./stary/`:

```
stary/
â”œâ”€â”€ public/
â”‚   â”œâ”€â”€ index.html           - gÅ‚Ã³wny HTML (wszystkie zakÅ‚adki)
â”‚   â”œâ”€â”€ analytics.html       - strona analityki
â”‚   â”œâ”€â”€ js/
â”‚   â”‚   â”œâ”€â”€ app.js          - gÅ‚Ã³wna logika Import
â”‚   â”‚   â”œâ”€â”€ bet-finder.js   - 15+ algorytmÃ³w (5562 linii!)
â”‚   â”‚   â”œâ”€â”€ watched-matches.js
â”‚   â”‚   â”œâ”€â”€ search-queue.js
â”‚   â”‚   â”œâ”€â”€ config/state.js - stan aplikacji
â”‚   â”‚   â”œâ”€â”€ api/            - API calls
â”‚   â”‚   â”œâ”€â”€ utils/          - utility functions
â”‚   â”‚   â””â”€â”€ ui/             - UI helpers
â”‚   â””â”€â”€ css/                - style sheets
â””â”€â”€ server/                 - backend (NIE RUSZAMY)
```

**WAÅ»NE:** Stary projekt to referencja! MoÅ¼esz z niego czerpaÄ‡:

- LogikÄ™ algorytmÃ³w
- Nazwy funkcji
- Flow UI
- StrukturÄ™ danych

### 0.8 Co powinieneÅ› wiedzieÄ‡ przed rozpoczÄ™ciem

1. **Backend dziaÅ‚a i jest gotowy** - nie musisz go konfigurowaÄ‡
2. **Stary projekt dziaÅ‚a** - moÅ¼esz go uruchomiÄ‡ jako referencjÄ™
3. **Mamy plan migracji** - 10 etapÃ³w (sekcja 12)
4. **Priorytet: Bet Finder** - to najwaÅ¼niejsza funkcja (15+ algorytmÃ³w)
5. **Pytaj gdy masz wÄ…tpliwoÅ›ci** - nie zgaduj!

### 0.9 Twoja rola w projekcie

Gdy zostaniesz przypisany do zadania, uÅ¼ytkownik powie:

> "Witaj w Bet Assistant 2.0! Zapoznaj siÄ™ z wprowadzeniem w pliku instrukcje dla agentÃ³w. ChcÄ™ abyÅ› odpowiadaÅ‚ w projekcie za **[TWOJA ROLA]**"

PrzykÅ‚adowe role:

- **UI Components** - tworzenie reuÅ¼ywalnych komponentÃ³w (Modal, Table, Form)
- **Import Page** - migracja zakÅ‚adki Import
- **Bet Finder** - implementacja algorytmÃ³w wyszukiwania
- **API Integration** - integracja z backendem
- **Testing** - testy i bugfixy

Po takiej wiadomoÅ›ci:

1. âœ… Przeczytaj **caÅ‚e** to wprowadzenie (sekcja 0)
2. âœ… Zapoznaj siÄ™ z zasadami (sekcje 1-11)
3. âœ… SprawdÅº plan migracji (sekcja 12)
4. âœ… Pytaj o szczegÃ³Å‚y swojej roli
5. âœ… Rozpocznij pracÄ™!

---

## 1. PODSTAWOWE ZASADY PRACY

### 1.1 Pytaj, gdy masz wÄ…tpliwoÅ›ci

**KLUCZOWA ZASADA:** JeÅ›li na jakimkolwiek etapie masz wÄ…tpliwoÅ›ci, niejasnoÅ›ci lub kilka moÅ¼liwych interpretacji - **ZADAWAJ PYTANIA**.

- âŒ NIE zgaduj intencji uÅ¼ytkownika
- âŒ NIE zakÅ‚adaj oczywistoÅ›ci
- âŒ NIE podejmuj decyzji "na Å›lepo"
- âœ… Pytaj o szczegÃ³Å‚y implementacji
- âœ… Pytaj o priorytety
- âœ… Pytaj o oczekiwany rezultat
- âœ… Pytaj, gdy coÅ› jest niejasne

**PrzykÅ‚ady sytuacji wymagajÄ…cych pytaÅ„:**

- Nie wiesz, czy uÅ¼ytkownik chce modyfikowaÄ‡ istniejÄ…cy komponent czy stworzyÄ‡ nowy
- Masz kilka rÃ³wnowaÅ¼nych sposobÃ³w implementacji
- Nie jesteÅ› pewien, jak nazwaÄ‡ zmiennÄ…/komponent/funkcjÄ™
- Nie wiesz, gdzie umieÅ›ciÄ‡ nowy kod w strukturze
- Instrukcja jest niejednoznaczna lub niepeÅ‚na

### 1.2 Rozumiej zanim dziaÅ‚asz

- Przeczytaj caÅ‚e polecenie przed rozpoczÄ™ciem pracy
- Analizuj kontekst i cel zadania
- SprawdÅº istniejÄ…cy kod przed modyfikacjÄ…
- Upewnij siÄ™, Å¼e rozumiesz zaleÅ¼noÅ›ci miÄ™dzy komponentami

---

## 2. ZASADY KODOWANIA

### 2.1 Minimalizm

- Pisz tylko **niezbÄ™dny** kod
- Unikaj nadmiarowej abstrakcji
- Jeden plik = jedna odpowiedzialnoÅ›Ä‡
- KrÃ³tkie, czytelne funkcje (max 50 linii)

### 2.2 Brak duplikatÃ³w

- Identyczny kod = wspÃ³lna funkcja/komponent
- Podobny kod = rozwaÅ¼ parametryzacjÄ™
- Sprawdzaj czy funkcjonalnoÅ›Ä‡ juÅ¼ istnieje przed tworzeniem nowej

### 2.3 Struktura rozparcelowana

- KaÅ¼dy komponent w osobnym pliku
- Logika biznesowa w `/utils/` lub `/hooks/`
- Typy w `/types/`
- API calls w `/api/`
- Style w CSS Modules (`.module.css`)

### 2.4 Schematy dla powtÃ³rzeÅ„

- Wykryj wzorce w kodzie
- TwÃ³rz reuÅ¼ywalne komponenty
- UÅ¼ywaj typÃ³w generycznych TypeScript
- Konfiguracja zamiast hard-code

---

## 3. KONWENCJE NAZEWNICTWA

### 3.1 Pliki

- Komponenty: `PascalCase.tsx` (np. `MatchCard.tsx`)
- Hooks: `camelCase.ts` z prefiksem `use` (np. `useSearchQueue.ts`)
- Utils: `camelCase.ts` (np. `formatDate.ts`)
- Typy: `PascalCase.ts` lub `index.ts`
- Style: `ComponentName.module.css`

### 3.2 Kod

- Komponenty: `PascalCase`
- Funkcje/zmienne: `camelCase`
- StaÅ‚e: `UPPER_SNAKE_CASE`
- Typy/Interfejsy: `PascalCase` z prefiksem `I` dla interface opcjonalnie
- CSS classes: `kebab-case` lub `camelCase`

---

## 4. DOKUMENTACJA

### 4.1 ObowiÄ…zek dokumentowania

Przy **kaÅ¼dej zmianie** aktualizuj odpowiednie pliki:

#### Dokumentacja techniczna

- Opis struktury projektu
- Mapa zaleÅ¼noÅ›ci miÄ™dzy plikami
- Flow: "KlikniÄ™cie â†’ Akcja â†’ Pliki"
- Architektura rozwiÄ…zaÅ„

#### Instrukcja obsÅ‚ugi

- Przewodnik uÅ¼ytkownika (bez kodu)
- Krok po kroku funkcjonalnoÅ›ci
- Screenshots/opisy interfejsu

#### Instrukcje dla agentÃ³w (ten plik)

- Aktualizuj zasady workflow
- Dodawaj nowe konwencje
- Dokumentuj decyzje projektowe

### 4.2 Format dokumentacji

- Markdown (`.md`)
- Przejrzysta struktura nagÅ‚Ã³wkÃ³w
- Kod w blokach ` ```typescript `
- Listy punktowane dla jasnoÅ›ci
- PrzykÅ‚ady gdy potrzebne

---

## 5. GIT I COMMITY

### 5.1 Zasady commitÃ³w

- Commit po kaÅ¼dej logicznej zmianie
- Format: `[typ]: opis` (np. `feat: add Match component`)
- Typy: `feat`, `fix`, `refactor`, `docs`, `style`, `test`
- Opis po polsku lub angielsku (konsekwentnie)

### 5.2 Branch strategy

- `main` - stabilna wersja
- Feature branches dla wiÄ™kszych zmian
- Pull requesty dla code review (opcjonalnie)

---

## 6. STRUKTURA PROJEKTU

```
Bet Assistant 2.0/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ api/              # API calls, klient HTTP
â”‚   â”œâ”€â”€ components/       # ReuÅ¼ywalne komponenty React
â”‚   â”œâ”€â”€ hooks/           # Custom React hooks
â”‚   â”œâ”€â”€ pages/           # Strony aplikacji (routing)
â”‚   â”œâ”€â”€ store/           # Zustand store (globalny state)
â”‚   â”œâ”€â”€ styles/          # Globalne style CSS
â”‚   â”œâ”€â”€ types/           # TypeScript types/interfaces
â”‚   â”œâ”€â”€ utils/           # Utility functions
â”‚   â”œâ”€â”€ App.tsx          # Root component
â”‚   â””â”€â”€ main.tsx         # Entry point
â”œâ”€â”€ Dokumentacja/        # ZAWSZE AKTUALIZUJ!
â”œâ”€â”€ public/              # Static assets
â””â”€â”€ stary/              # Stary projekt (referencja)
```

---

## 7. TECHNOLOGY STACK

### 7.1 Frontend

- **React 18.3.1** - UI library
- **TypeScript** - Type safety
- **Vite** - Build tool
- **React Router 6** - Routing
- **Zustand** - State management
- **TanStack Query** - Server state
- **CSS Modules** - Styling

### 7.2 Backend (NIE ZMIENIAMY)

- Express + Prisma + PostgreSQL
- Endpoint: `localhost:3000`
- Proxy w Vite: `/api/*`

---

## 8. WORKFLOW PRACY

### 8.1 Przed rozpoczÄ™ciem

1. Przeczytaj zadanie **w caÅ‚oÅ›ci**
2. Zadaj pytania jeÅ›li coÅ› niejasne
3. SprawdÅº istniejÄ…cy kod
4. Zaplanuj zmiany

### 8.2 Podczas implementacji

1. Implementuj maÅ‚ymi krokami
2. Testuj na bieÅ¼Ä…co (`npm run dev`)
3. Commituj logiczne jednostki
4. Aktualizuj dokumentacjÄ™ **na bieÅ¼Ä…co**

### 8.3 Po zakoÅ„czeniu

1. SprawdÅº czy dziaÅ‚a (`npm run dev`)
2. Upewnij siÄ™ Å¼e dokumentacja aktualna
3. Verify TypeScript (`npm run build`)
4. Commit + push

---

## 9. PRIORYTETY

### Zawsze priorytet:

1. **DziaÅ‚ajÄ…ce rozwiÄ…zanie** > perfekcja
2. **Prosty kod** > skomplikowany
3. **Dokumentacja** > komentarze w kodzie
4. **Pytania** > zgadywanie

### Nigdy:

- âŒ Duplikaty kodu
- âŒ NieuÅ¼ywany kod (dead code)
- âŒ Nietestowane zmiany
- âŒ Nieudokumentowane zmiany
- âŒ Breaking changes bez konsultacji

---

## 10. KOMUNIKACJA

### 10.1 Z uÅ¼ytkownikiem

- Jasne, zwiÄ™zÅ‚e odpowiedzi
- Potwierdzanie zrozumienia zadania
- Regularny feedback o postÄ™pach
- **Pytania gdy masz wÄ…tpliwoÅ›ci**

### 10.2 Z innymi agentami

- Sprawdzaj dokumentacjÄ™ przed pytaniem
- Dokumentuj wÅ‚asne decyzje
- Zostawiaj jasne komentarze dla przyszÅ‚ych zmian

---

## 11. DEBUGGING

### Gdy coÅ› nie dziaÅ‚a:

1. SprawdÅº konsoleÄ™ przeglÄ…darki (F12)
2. SprawdÅº terminal Vite
3. SprawdÅº TypeScript errors
4. SprawdÅº czy backend dziaÅ‚a (localhost:3000)
5. Pytaj uÅ¼ytkownika o wiÄ™cej informacji

### Typowe problemy:

- Import paths - sprawdÅº Å›cieÅ¼ki
- Type errors - dodaj/popraw typy
- API errors - sprawdÅº backend
- Style nie dziaÅ‚ajÄ… - sprawdÅº import CSS

---

## 12. ETAPY MIGRACJI (OBECNY PROJEKT)

Projekt: Migracja z vanilla JS â†’ React + TypeScript

**Plan 10 etapÃ³w:**

1. Infrastruktura (API, types, store, utils)
2. Komponenty wspÃ³Å‚dzielone (Modal, Table, Form)
3. Import Tab
4. Database Tab
5. **Bet Finder Tab** (najwaÅ¼niejsze - 15+ algorytmÃ³w)
6. Strefa Typera Tab
7. Analytics Page
8. Style i polish
9. Integracja z backendem
10. Testing i bugfixy

**Szacowany czas:** 25-35 godzin

---

## OSTATNIA AKTUALIZACJA

- **Data:** 30 grudnia 2025
- **Wersja:** 1.0
- **Status:** Inicjalizacja projektu - Git setup + GitHub integration
- **NastÄ™pny krok:** ETAP 1 - Infrastruktura

---

**PAMIÄ˜TAJ:** Gdy masz wÄ…tpliwoÅ›ci - **PYTAJ!** ğŸ¤
